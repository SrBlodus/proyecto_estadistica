{% extends 'base.html' %}

{% block title %}Consulta de Estadísticas de Egresados{% endblock %}

{% block content %}
<div style="margin-top: 20px;">
    <a href="{% url 'inicio' %}" style="text-decoration: none;">
        <button style="background-color: #ddd; border: none; padding: 10px; cursor: pointer;">⬅ Volver</button>
    </a>
</div>
<h2>📊 Consulta de Estadísticas de Egresados</h2>

<form method="GET">
    {{ form.as_p }}
    <button type="submit">🔍 Buscar</button>
</form>

<hr>

<h3>📌 Resumen de Resultados</h3>

<table border="1">
    <tr>
        <th>Total de registros en la base de datos</th>
        <td><strong>{{ total_registros }}</strong></td>
    </tr>
    <tr>
        <th>Total de egresados encontrados con filtros</th>
        <td>{{ total_egresados }}</td>
    </tr>
</table>

<hr>

<h3>📊 Resultados de Valoraciones</h3>
<table border="1">
    <tr>
        <th>Concepto</th>
        <th>Valoración Promedio</th>
        <th>Personas que valoraron</th>
    </tr>
    <tr>
        <td>Impacto de estudios en trayectoria profesional</td>
        <td>{{ prom_valoracion_estudios_trayectoria_profesional }}</td>
        <td>{{ total_valoraciones_estudios }}</td>
    </tr>
    <tr>
        <td>Aprendizaje brindado por docentes</td>
        <td>{{ prom_valoracion_aprendizaje_docente }}</td>
        <td>{{ total_valoraciones_docente }}</td>
    </tr>
    <tr>
        <td>Impacto de formación académica en la situación laboral</td>
        <td>{{ prom_valoracion_impacto_formacion_academica_laboral }}</td>
        <td>{{ total_valoraciones_impacto }}</td>
    </tr>
</table>

<hr>

{% if form.cleaned_data.mostrar_comentarios_ciudad_residencia %}
<h3>🌍 Ciudades de Residencia</h3>
<ul>
    {% for egresado in egresados_filtrados %}
    <li><strong>{{ egresado.ciudad }}</strong></li>
    {% endfor %}
</ul>
{% endif %}

{% if form.cleaned_data.mostrar_comentarios_aprendizajes_no_curriculares %}
<h3>📖 Aprendizajes No Curriculares</h3>
<ul>
    {% for egresado in egresados_filtrados %}
    <li>{{ egresado.opcional_aprendizajes_no_curriculares }}</li>
    {% endfor %}
</ul>
{% endif %}

{% if form.cleaned_data.opcional_influencia_en_trayectoria %}
<h3>🎓 Influencia de la Formación en la Trayectoria Profesional</h3>
<ul>
    {% for egresado in egresados_filtrados %}
    <li>{{ egresado.opcional_influencia_en_trayectoria }}</li>
    {% endfor %}
</ul>
{% endif %}

{% if form.cleaned_data.opcional_area_posgrado %}
<h3>📚 Áreas o Temas de Interés para Posgrados</h3>
<ul>
    {% for egresado in egresados_filtrados %}
    <li>{{ egresado.opcional_area_posgrado }}</li>
    {% endfor %}
</ul>
{% endif %}

{% if form.cleaned_data.opcional_estrategia_convocatoria %}
<h3>📢 Estrategias Sugeridas para la Convocatoria de Estudiantes</h3>
<ul>
    {% for egresado in egresados_filtrados %}
    <li>{{ egresado.opcional_estrategia_convocatoria }}</li>
    {% endfor %}
</ul>
{% endif %}

{% if form.cleaned_data.opcional_contacto_carrera %}
<h3>🤝 Contacto en Busca de Desarrollo de Oportunidades Laborales</h3>
<ul>
    {% for egresado in egresados_filtrados %}
    <li>{{ egresado.opcional_contacto_carrera }}</li>
    {% endfor %}
</ul>
{% endif %}

<hr>

{% endblock %}
